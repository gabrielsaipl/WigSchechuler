@page "/"
@inject EventListService eventListService
<PageTitle>WIGScheduler</PageTitle>
<WIGScheduler ResourceData="Resources" EventData="Events" CurrentView="WIGScheduler.View.HorizontalMonth" EventAction="eventclick"></WIGScheduler>


<EventDetail Event="EventDetails" ShowDetails="ShowHideDetails"></EventDetail>
@code{
    //Properties

    public List<Event> Events { get; set; } = new List<Event>();
    public List<ResourceData> Resources { get; set; } = new List<ResourceData>();
    public Event EventDetails = new Event();
    private bool ShowHideDetails = false;
    //Methods

    //Method for when clicking an event
    private void eventclick(Event eve)
    {
        EventDetails = eve;
        ShowHideDetails = true;
        StateHasChanged();
    }


    protected override void OnInitialized()
    {
        InitializeEvents();
        AddListItems();
        InitializeResources();
        base.OnInitialized();
    }
    private void AddListItems()
    {
        if (eventListService.EventList.Any())
        {
            foreach (var eve in eventListService.EventList)
            {
                if (Events.Contains(eve))
                {

                }
                else
                {
                    Events.Add(eve);
                }

            }
        }
        
        
    }
    private void InitializeEvents()
    {

        var event1 = new Event
        {
            Title = "F",
            StartDate = new DateTime(2023, 5, 7),
            EndDate = new DateTime(2023, 5, 17),
            Description = "Isto representa um evento criado pelo utilizador",
            SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 5, 7), DayNumber = 7, IsOtherMonth = false },
            EventResource = 1,
            Accepted = true,
        };
        @*var event12 = new Event
            {
                Title = "Feriado12",
                StartDate = new DateTime(2023, 4, 3),
                EndDate = new DateTime(2023, 4, 7),
                Description = "Isto representa um evento criado pelo utilizador",
                SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 4, 3), DayNumber = 3, IsOtherMonth = false },
                EventResource = 1,
            };
            var event2 = new Event
            {
                Title = "Aniversario",
                StartDate = new DateTime(2023, 4, 3),
                EndDate = new DateTime(2023, 4, 9),
                Description = "Isto representa um evento criado pelo utilizador",
                SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 4, 25), DayNumber = 25, IsOtherMonth = false },
                EventResource = 2,
            };
            var event3 = new Event
            {
                Title = "Celebracao",
                StartDate = new DateTime(2023, 4, 4),
                EndDate = new DateTime(2023, 4, 27),
                Description = "Isto representa um evento criado pelo utilizador",
                SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 5, 17), DayNumber = 17, IsOtherMonth = false },
                EventResource = 7,
            };
            var event4 = new Event
            {
                Title = "Feriado",
                StartDate = new DateTime(2023, 5, 1),
                EndDate = new DateTime(2023, 5, 1),
                Description = "Isto representa um evento criado pelo utilizador",
                SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 5, 1), DayNumber = 1, IsOtherMonth = false },
                EventResource = 1,
            };
            var event5 = new Event
            {
                Title = "Feriado",
                StartDate = new DateTime(2023, 5, 1),
                EndDate = new DateTime(2023, 5, 1),
                Description = "Isto representa um evento criado pelo utilizador",
                SelectedDay = new Day { Class = "day2", Date = new DateTime(2023, 5, 1), DayNumber = 1, IsOtherMonth = false },
                EventResource = 5,
            };*@
        var Evess = new List<Event> { event1, @*event2, event3, event4, event5, event12 *@};
                    foreach (var evess in Evess)
                    {
                        Events.Add(evess);
                    }

                }
                private void InitializeResources()
                {
                    var res1 = new ResourceData { Text = "Resource", Id = 1 };
                    var res2 = new ResourceData { Text = "Resource", Id = 2 };
                    var res3 = new ResourceData { Text = "Resource", Id = 3 };
                    var res4 = new ResourceData { Text = "Resource", Id = 4 };
                    var res5 = new ResourceData { Text = "Resource", Id = 5 };
                    var res6 = new ResourceData { Text = "Resource", Id = 6 };
                    var res7 = new ResourceData { Text = "Resource", Id = 7 };
                    var res8 = new ResourceData { Text = "Resource", Id = 8 };
                    var resc = new List<ResourceData> { res1, res2, res3, res4, res5, res6, res7, res8 };
                    foreach (var res in resc)
                    {
                        Resources.Add(res);
                    }
                }
}